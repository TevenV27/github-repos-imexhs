<div class="flex flex-col lg:flex-row h-screen w-screen dark:bg-[#0f141c]">
    <!-- Sidebar usuario -->
    <div class="lg:h-screen w-full lg:w-[250px]">
        <app-user-sidecar [name]="name" [username]="username" [email]="email" [avatar]="avatar" [stars]="stars">
        </app-user-sidecar>
    </div>
    <!-- Lista repositorios -->
    <div class="flex-1 overflow-y-auto">
        <div class="mb-6 flex gap-2 py-3 px-10 ring-1 ring-gray-500/20">
            <input type="text" placeholder="Buscar usuario de GitHub..."
              class="w-full md:w-2/3 lg:w-1/4 h-10 bg-transparent outline-none ring-1 ring-inset ring-gray-400/20 placeholder-gray-400 rounded-lg px-4 text-base text-gray-800 dark:text-white shadow-sm border-none focus:ring-1 focus:ring-inset focus:ring-gray-400/30 transition"
              [(ngModel)]="searchUsername" (input)="clearSearchError()" (keydown.enter)="goToUser()" autocomplete="off" />
            <div *ngIf="searchError" class="text-red-500 text-sm font-semibold mt-2 px-2">
              {{ searchError }}
            </div>
          </div>
        <div class="px-10 py-6">

            <div class="mb-4 flex gap-4 flex-wrap">
                <div class="mb-4 flex gap-4 flex-wrap">
                  <input type="text" placeholder="Filtrar por nombre" [(ngModel)]="nameFilter" (ngModelChange)="applyFilters()"
                    class="h-10 flex-1 bg-transparent outline-none ring-1 ring-inset ring-gray-500/20 placeholder-gray-400 rounded-lg px-4 text-base text-gray-800 dark:text-white border-none focus:ring-1 focus:ring-inset focus:ring-gray-500/20 transition"
                    autocomplete="off" />
                  <select [(ngModel)]="languageFilter" (ngModelChange)="applyFilters()"
                    class="h-10 bg-transparent outline-none ring-1 ring-inset ring-gray-500/20 text-base text-gray-800 dark:text-white placeholder-gray-400 rounded-lg px-2 pr-10 border-none focus:ring-1 focus:ring-inset focus:ring-gray-500/20 transition relative">
                    <option value="">Todos los lenguajes</option>
                    <option *ngFor="let lang of languages" [value]="lang">{{ lang }}</option>
                  </select>
                </div>
              </div>
            <div *ngIf="errorMsg" class="text-red-500 font-medium mb-4">
                {{ errorMsg }}
            </div>
            <div *ngIf="filteredRepos.length > 0; else noRepos"
                class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <div *ngFor="let repo of filteredRepos" class="group relative 
               bg-white 
                border-gray-100 dark:border-gray-100 dark:bg-[#111823] border-1
                dark:ring-gray-500/30
               rounded
               transition-all duration-200
               p-6 flex flex-col min-h-[200px] overflow-hidden 
               ring-1 ring-gray-200 hover:ring-blue-200 dark:hover:ring-gray-100/30">
                    <!-- Header Repo Name -->
                    <div class="flex items-center gap-2 mb-2">
                        <svg class="w-5 h-5 text-gray-400 group-hover:text-blue-600 transition" fill="currentColor"
                            viewBox="0 0 20 20">
                            <path fill-rule="evenodd"
                                d="M10 2C5.58 2 2 5.58 2 10c0 3.31 2.69 6 6 6 1.53 0 2.94-.58 4-1.53C14.53 15.42 16.94 16 18 16c0-4.42-3.58-8-8-8zm0 14c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z"
                                clip-rule="evenodd" />
                        </svg>
                        <a [href]="repo.html_url" target="_blank"
                            class="text-xl font-bold text-gray-800 dark:text-gray-50 hover:text-blue-700 dark:hover:text-blue-400 transition group-hover:underline truncate">
                            {{ repo.name }}
                        </a>
                        <span *ngIf="repo.private"
                            class="ml-2 text-xs px-2 py-0.5 bg-gray-200 dark:bg-gray-700 rounded-full font-semibold text-gray-600 dark:text-gray-300">Privado</span>
                    </div>
    
                    <!-- Description -->
                    <div class="text-gray-600 dark:text-gray-300 mb-4 text-sm min-h-[48px] line-clamp-3">
                        {{ repo.description || 'Sin descripción' }}
                    </div>
    
                    <!-- Badges & Footer -->
                    <div
                        class="flex flex-wrap items-center gap-3 mt-auto pt-4 border-t border-gray-100 dark:border-gray-800">
                        <!-- Stars -->
                        <span
                            class="flex items-center gap-1 text-sm font-medium text-yellow-500 bg-yellow-50 dark:bg-yellow-900/30 px-2 py-0.5 rounded-lg shadow-sm">
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                <path
                                    d="M10 15l-5.878 3.09 1.122-6.545L.488 6.91l6.562-.955L10 0l2.95 5.955 6.562.955-4.756 4.635 1.122 6.545z" />
                            </svg>
                            {{ repo.stargazers_count }}
                        </span>
                        <!-- Lenguaje -->
                        <span *ngIf="repo.language"
                            class="flex items-center gap-1 text-xs font-semibold bg-gray-100 dark:text-white dark:bg-gray-800 px-2 py-0.5 rounded-full shadow">
                            <span class="w-3 h-3 rounded-full"
                                [ngStyle]="{ background: languageColors[repo.language] || '#718096' }"></span>
                            {{ repo.language }}
                        </span>
                        <!-- Link GitHub -->
                        <a [href]="repo.html_url" target="_blank"
                            class="ml-auto text-blue-600 dark:text-blue-400 text-xs font-semibold hover:underline flex items-center gap-1">
                            Ver en GitHub
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M17 7l-10 10M7 7h10v10" />
                            </svg>
                        </a>
                    </div>
    
                    <!-- Micro efecto decorativo -->
                    <div class="absolute -top-5 -right-8 opacity-5 group-hover:opacity-10 transition pointer-events-none">
                        <svg width="90" height="90" fill="currentColor" class="text-blue-600">
                            <circle cx="45" cy="45" r="45" />
                        </svg>
                    </div>
                </div>
            </div>
            <ng-template #noRepos>
                <p class="text-gray-500 mt-10 text-center">No hay repositorios públicos para este usuario.</p>
            </ng-template>

        </div>
    </div>
</div>